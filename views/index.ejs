<!DOCTYPE html>
<html>
  <head>
    <title>Espresso!</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1>Espresso!</h1>
    <p>Welcome to Espresso!</p>
    <div class="content"><div>
    <script type="text/javascript">
      window.onload = function () {
        var players = <%- players %>;

        // console.log(players);
        // log out player kills
        //Object.keys(players).forEach(player => console.log(players[player].name));
        var arr = [];
        for (var player in players) {
          arr.push({
            name:        players[player].name,
            avg_dpm:     players[player].dmg*60/players[player].time_played,
            avg_kills:   players[player].kills/players[player].matches_played,
            avd_kpd:     players[player].kpd,
            matches:     players[player].matches_played,
            time_played: players[player].time_played,
            dmg:         players[player].dmg
          });
        }
        /// Safari doesn't know abour arrow functions yet
        /// use webpack to transpile if you want to use arrow functions
        arr.sort(function (a, b) {
          if (a.matches > b.matches) return -1;
          else if (a.matches < b.matches) return 1;
          else return 0;
        });
        console.log(arr);
      }
    </script>
  </body>
</html>
